{"ast":null,"code":"import { Configuration, OpenAIApi } from 'openai';\nimport { AlphaVantage } from './APIs/AlphaVantage';\nimport { WallStreetBets } from './APIs/WallStreetBets';\nimport { StockSentimentAPI } from './APIs/StockSentimentAPI';\nimport { GFinance } from './APIs/GFinance';\nimport { Crowdsense } from './APIs/Crowdsense';\nimport { SECFilings } from './APIs/SECFilings';\n\n// This is supposed to be the model that checks for information based on a query. \n// Right now it is kind of basic, but when the API integrations are done, I want to come back here and have it be intelligently asking requests based on the user's question and then summarizing it.\n\nconst orgId = process.env.ORG_ID;\nconst apiKey = \"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\";\nconst configuration = new Configuration({\n  orgId: orgId,\n  apiKey: apiKey\n});\nconst openai = new OpenAIApi(configuration);\nexport function KariFinancialAnalyst(query) {\n  api_search(query).then(result => {\n    console.log(result);\n    return workflow;\n  });\n\n  // maps possible requestTypes to an array of associated functions for callback. functions are below.\n  const requestFunctions = {\n    1: AlphaVantage,\n    //\n    2: WallStreetBets,\n    //  \n    3: StockSentimentAPI,\n    //\n    4: GFinance,\n    //  \n    5: Crowdsense,\n    // \n    6: SECFilings\n  };\n\n  // overall workflow. Decides which sub-workflow to execute, executes it, then returns the response.\n  async function api_search(query) {\n    console.log(\"Step 1: gettingRecommendedDataSources\");\n    const requestType = await getRecommendedDataSources(query);\n    // extract the number from the string\n    const intRequest = parseInt(requestType.match(/\\d+/)[0]);\n    console.log(\"Step 2 getting response from requested function:\", intRequest);\n    const requestOutput = requestFunctions[intRequest](query);\n    return requestOutput;\n  }\n\n  // This is basically going to determine what sources should be queried to get an ideal response\n  // It will send the query to each of the dataSources and get a response.\n  async function getRecommendedDataSources(query) {\n    const response = await openai.createCompletion({\n      model: \"text-davinci-003\",\n      prompt: `\n        You are an artifical financial advisor. Your job is to view the user's request and determine the data sources most relevant to the request.\n        These data sources are different APIs that provide different types of data. You will need to determine which data source is most relevant to the user's request.\n\n        Potential Options:\n           | Name | Description | How to Query |\n        1. | AlphaVantage | Stock Price Data, Alpha Intelligence, Company Fundamentals, Company Financial Statements, Forex, Commodities, Economic Indicators, Technical Indicators | Specific Questions |\n        2. | WallStreetBets | Stocks & Sentiment by Reddit posts on popular finance subreddits | Vague Requests, Trending Info |\n        3. | StockSentimentAPI | Sentiment Analyis & News Articles by ticker | Specific or Vague questions |\n        4. | GFinance | General market screening, get info by category (winners, losers, active, etc.) | Vague Requests, Trending Info |\n        5. | Crowdsense | Cryptocurrency Sentiment Analsyis by scraping social media & predicting future spikes | Specific or Vague questions |\n        6. | SECFilings | SEC filings for a public company by ticker, including Manager Ownership, Insider Transactions, and Manager Holdings | Specific or Vague questions |\n\n        Output: The number of the data source you think is most relevant to the user's request.\n        Message: ${query}     \n        `,\n      max_tokens: 128,\n      temperature: .5,\n      stop: \"/n\"\n    });\n    return response.data.choices[0].text;\n  }\n\n  // Send the query to each of the dataSources\n  // Get the response from each of the dataSources\n  // Parse the response from each of the dataSources\n  // Combine the response from each of the dataSources\n  // Return the summarized response.\n}\n_c = KariFinancialAnalyst;\nvar _c;\n$RefreshReg$(_c, \"KariFinancialAnalyst\");","map":{"version":3,"names":["Configuration","OpenAIApi","AlphaVantage","WallStreetBets","StockSentimentAPI","GFinance","Crowdsense","SECFilings","orgId","process","env","ORG_ID","apiKey","configuration","openai","KariFinancialAnalyst","query","api_search","then","result","console","log","workflow","requestFunctions","requestType","getRecommendedDataSources","intRequest","parseInt","match","requestOutput","response","createCompletion","model","prompt","max_tokens","temperature","stop","data","choices","text"],"sources":["/Users/aaronleek/Desktop/coding-projects/kari-ai/kari-platform/Kari-React-Client/Kari-React-Client/src/Models/KariFinancialAnalyst.js"],"sourcesContent":["import { Configuration, OpenAIApi } from 'openai';\nimport { AlphaVantage } from './APIs/AlphaVantage';\nimport { WallStreetBets } from './APIs/WallStreetBets';\nimport { StockSentimentAPI } from './APIs/StockSentimentAPI';\nimport { GFinance } from './APIs/GFinance';\nimport { Crowdsense } from './APIs/Crowdsense';\nimport { SECFilings } from './APIs/SECFilings';\n\n\n\n// This is supposed to be the model that checks for information based on a query. \n// Right now it is kind of basic, but when the API integrations are done, I want to come back here and have it be intelligently asking requests based on the user's question and then summarizing it.\n\nconst orgId = process.env.ORG_ID;\nconst apiKey = \"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\";\n\nconst configuration = new Configuration({\n    orgId: orgId,\n    apiKey: apiKey,\n  });\n  const openai = new OpenAIApi(configuration);\n\nexport function KariFinancialAnalyst(query) {\n\n    api_search(query).then(result => {\n        console.log(result);\n        return workflow;\n        });\n    \n\n    // maps possible requestTypes to an array of associated functions for callback. functions are below.\n    const requestFunctions = {\n        1: AlphaVantage, //\n        2: WallStreetBets, //  \n        3: StockSentimentAPI, //\n        4: GFinance, //  \n        5: Crowdsense, // \n        6: SECFilings, \n    }\n\n    // overall workflow. Decides which sub-workflow to execute, executes it, then returns the response.\n    async function api_search(query) {\n        console.log(\"Step 1: gettingRecommendedDataSources\")\n        const requestType = await getRecommendedDataSources(query);\n        // extract the number from the string\n        const intRequest = parseInt(requestType.match(/\\d+/)[0]);\n        console.log(\"Step 2 getting response from requested function:\",intRequest);\n        const requestOutput = requestFunctions[intRequest](query);\n        return requestOutput;\n    }\n   \n    // This is basically going to determine what sources should be queried to get an ideal response\n    // It will send the query to each of the dataSources and get a response.\n    async function getRecommendedDataSources(query) {\n    const response = await openai.createCompletion({\n        model: \"text-davinci-003\",\n        prompt: `\n        You are an artifical financial advisor. Your job is to view the user's request and determine the data sources most relevant to the request.\n        These data sources are different APIs that provide different types of data. You will need to determine which data source is most relevant to the user's request.\n\n        Potential Options:\n           | Name | Description | How to Query |\n        1. | AlphaVantage | Stock Price Data, Alpha Intelligence, Company Fundamentals, Company Financial Statements, Forex, Commodities, Economic Indicators, Technical Indicators | Specific Questions |\n        2. | WallStreetBets | Stocks & Sentiment by Reddit posts on popular finance subreddits | Vague Requests, Trending Info |\n        3. | StockSentimentAPI | Sentiment Analyis & News Articles by ticker | Specific or Vague questions |\n        4. | GFinance | General market screening, get info by category (winners, losers, active, etc.) | Vague Requests, Trending Info |\n        5. | Crowdsense | Cryptocurrency Sentiment Analsyis by scraping social media & predicting future spikes | Specific or Vague questions |\n        6. | SECFilings | SEC filings for a public company by ticker, including Manager Ownership, Insider Transactions, and Manager Holdings | Specific or Vague questions |\n\n        Output: The number of the data source you think is most relevant to the user's request.\n        Message: ${query}     \n        `,\n        max_tokens: 128,\n        temperature: .5,\n        stop: \"/n\",\n    });\n    return response.data.choices[0].text;\n    }\n\n\n\n// Send the query to each of the dataSources\n// Get the response from each of the dataSources\n// Parse the response from each of the dataSources\n// Combine the response from each of the dataSources\n// Return the summarized response.\n}"],"mappings":"AAAA,SAASA,aAAa,EAAEC,SAAS,QAAQ,QAAQ;AACjD,SAASC,YAAY,QAAQ,qBAAqB;AAClD,SAASC,cAAc,QAAQ,uBAAuB;AACtD,SAASC,iBAAiB,QAAQ,0BAA0B;AAC5D,SAASC,QAAQ,QAAQ,iBAAiB;AAC1C,SAASC,UAAU,QAAQ,mBAAmB;AAC9C,SAASC,UAAU,QAAQ,mBAAmB;;AAI9C;AACA;;AAEA,MAAMC,KAAK,GAAGC,OAAO,CAACC,GAAG,CAACC,MAAM;AAChC,MAAMC,MAAM,GAAG,qDAAqD;AAEpE,MAAMC,aAAa,GAAG,IAAIb,aAAa,CAAC;EACpCQ,KAAK,EAAEA,KAAK;EACZI,MAAM,EAAEA;AACV,CAAC,CAAC;AACF,MAAME,MAAM,GAAG,IAAIb,SAAS,CAACY,aAAa,CAAC;AAE7C,OAAO,SAASE,oBAAoB,CAACC,KAAK,EAAE;EAExCC,UAAU,CAACD,KAAK,CAAC,CAACE,IAAI,CAACC,MAAM,IAAI;IAC7BC,OAAO,CAACC,GAAG,CAACF,MAAM,CAAC;IACnB,OAAOG,QAAQ;EACf,CAAC,CAAC;;EAGN;EACA,MAAMC,gBAAgB,GAAG;IACrB,CAAC,EAAErB,YAAY;IAAE;IACjB,CAAC,EAAEC,cAAc;IAAE;IACnB,CAAC,EAAEC,iBAAiB;IAAE;IACtB,CAAC,EAAEC,QAAQ;IAAE;IACb,CAAC,EAAEC,UAAU;IAAE;IACf,CAAC,EAAEC;EACP,CAAC;;EAED;EACA,eAAeU,UAAU,CAACD,KAAK,EAAE;IAC7BI,OAAO,CAACC,GAAG,CAAC,uCAAuC,CAAC;IACpD,MAAMG,WAAW,GAAG,MAAMC,yBAAyB,CAACT,KAAK,CAAC;IAC1D;IACA,MAAMU,UAAU,GAAGC,QAAQ,CAACH,WAAW,CAACI,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IACxDR,OAAO,CAACC,GAAG,CAAC,kDAAkD,EAACK,UAAU,CAAC;IAC1E,MAAMG,aAAa,GAAGN,gBAAgB,CAACG,UAAU,CAAC,CAACV,KAAK,CAAC;IACzD,OAAOa,aAAa;EACxB;;EAEA;EACA;EACA,eAAeJ,yBAAyB,CAACT,KAAK,EAAE;IAChD,MAAMc,QAAQ,GAAG,MAAMhB,MAAM,CAACiB,gBAAgB,CAAC;MAC3CC,KAAK,EAAE,kBAAkB;MACzBC,MAAM,EAAG;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmBjB,KAAM;AACzB,SAAS;MACDkB,UAAU,EAAE,GAAG;MACfC,WAAW,EAAE,EAAE;MACfC,IAAI,EAAE;IACV,CAAC,CAAC;IACF,OAAON,QAAQ,CAACO,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC,CAACC,IAAI;EACpC;;EAIJ;EACA;EACA;EACA;EACA;AACA;AAAC,KAhEexB,oBAAoB;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}