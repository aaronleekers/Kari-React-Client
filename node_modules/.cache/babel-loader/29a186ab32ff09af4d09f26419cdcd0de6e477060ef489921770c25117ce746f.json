{"ast":null,"code":"import { Configuration, OpenAIApi } from 'openai';\nimport { AlphaVantage } from './APIs/AlphaVantage';\nimport { WallStreetBets } from './APIs/WallStreetBets';\nimport { StockSentimentAPI } from './APIs/StockSentimentAPI';\nimport { GFinance } from './APIs/GFinance';\nimport { Crowdsense } from './APIs/Crowdsense';\nimport { SECFilings } from './APIs/SECFilings';\nconst orgId = process.env.ORG_ID;\nconst apiKey = \"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\";\nconst configuration = new Configuration({\n  orgId: orgId,\n  apiKey: apiKey\n});\nconst openai = new OpenAIApi(configuration);\nexport function KariFinancialAnalyst(query) {\n  const requestFunctions = {\n    1: AlphaVantage,\n    2: WallStreetBets,\n    3: StockSentimentAPI,\n    4: GFinance,\n    5: Crowdsense,\n    6: SECFilings\n  };\n  function workflow(query) {\n    let dataSources;\n    let responses;\n    let parsedResponses;\n    let combinedResponses;\n    console.log(\"Running workflow\");\n    console.log(\"getting recommended DataSources\");\n    dataSources = getRecommendedDataSources(query);\n    console.log(`Recommended DataSources: ${dataSources}`);\n    const intRequest = parseInt(dataSources);\n    // if intRequest is between 1-6, run the request function\n    if (intRequest >= 1 && intRequest <= 6) {\n      console.log(`Running request function: ${intRequest}`);\n      responses = requestFunctions[intRequest](query);\n      console.log(`Responses: ${responses}`);\n      parsedResponses = parseResponses(responses);\n      combinedResponses = combineResponses(parsedResponses);\n      return combinedResponses;\n    } else {\n      console.log(\"Invalid response\");\n    }\n  }\n  return workflow;\n\n  // This is basically going to determine what sources should be queried to get an ideal response\n  // It will send the query to each of the dataSources and get a response.\n\n  async function getRecommendedDataSources(query) {\n    const response = await openai.createCompletion({\n      model: \"text-davinci-003\",\n      prompt: `\n        You are an artifical financial advisor. Your job is to view the user's request and determine which data sources are most relevant to the request.\n        Potential Options:\n        1. AlphaVantage - Stock Data, Alpha Intelligence, Fundamentals, Forex, Commodities, Economic Indicators, Technical Indicators\n        2. WallStreetBets - Stocks & Sentiment by Reddit posts on popular finance subreddits \n        3. StockSentimentAPI - Sentiment Analyis & News Articles by ticker\n        4. GFinance - General market screening, get info by category (winners, losers, active, etc.)\n        5. Crowdsense - Cryptocurrency Sentiment Analsyis by scraping social media & predicting future spikes\n        6. SECFilings - SEC filings for a company by ticker, including Manager Ownership, Insider Transactions, and Manager Holdings   \n        Return: the numbers of the data sources you want to query, separated by commas. For example, if you want to query data sources 1, 2, and 3, you would return \"1,2,3\"\n        Message: ${query}     \n        `,\n      max_tokens: 128,\n      temperature: .5,\n      stop: \"/n\"\n    });\n    return response.data.choices[0].text;\n  }\n  async function parseResponses(responses) {}\n  async function combineResponses(parsedResponses) {}\n\n  // Send the query to each of the dataSources\n  // Get the response from each of the dataSources\n  // Parse the response from each of the dataSources\n  // Combine the response from each of the dataSources\n  // Return the summarized response.\n}\n_c = KariFinancialAnalyst;\nvar _c;\n$RefreshReg$(_c, \"KariFinancialAnalyst\");","map":{"version":3,"names":["Configuration","OpenAIApi","AlphaVantage","WallStreetBets","StockSentimentAPI","GFinance","Crowdsense","SECFilings","orgId","process","env","ORG_ID","apiKey","configuration","openai","KariFinancialAnalyst","query","requestFunctions","workflow","dataSources","responses","parsedResponses","combinedResponses","console","log","getRecommendedDataSources","intRequest","parseInt","parseResponses","combineResponses","response","createCompletion","model","prompt","max_tokens","temperature","stop","data","choices","text"],"sources":["/Users/aaronleek/Desktop/coding-projects/kari-ai/kari-platform/Kari-React-Client/Kari-React-Client/src/Models/KariFinancialAnalyst.js"],"sourcesContent":["import { Configuration, OpenAIApi } from 'openai';\nimport { AlphaVantage } from './APIs/AlphaVantage';\nimport { WallStreetBets } from './APIs/WallStreetBets';\nimport { StockSentimentAPI } from './APIs/StockSentimentAPI';\nimport { GFinance } from './APIs/GFinance';\nimport { Crowdsense } from './APIs/Crowdsense';\nimport { SECFilings } from './APIs/SECFilings';\n\n\nconst orgId = process.env.ORG_ID;\nconst apiKey = \"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\";\n\nconst configuration = new Configuration({\n    orgId: orgId,\n    apiKey: apiKey,\n  });\n  const openai = new OpenAIApi(configuration);\n\nexport function KariFinancialAnalyst(query) {\n\n    const requestFunctions = {\n        1: AlphaVantage,\n        2: WallStreetBets,\n        3: StockSentimentAPI,\n        4: GFinance,\n        5: Crowdsense,\n        6: SECFilings,\n    }\n\n    function workflow(query){\n    let dataSources;\n    let responses;\n    let parsedResponses;\n    let combinedResponses;\n    \n    console.log(\"Running workflow\");\n    console.log(\"getting recommended DataSources\");\n    dataSources = getRecommendedDataSources(query);\n    console.log(`Recommended DataSources: ${dataSources}`);\n    const intRequest = parseInt(dataSources);\n    // if intRequest is between 1-6, run the request function\n    if (intRequest >= 1 && intRequest <= 6) {\n    console.log(`Running request function: ${intRequest}`)\n    responses = requestFunctions[intRequest](query);\n    console.log(`Responses: ${responses}`);\n    parsedResponses = parseResponses(responses);\n    combinedResponses = combineResponses(parsedResponses);\n    return combinedResponses;\n    } else { \n        console.log(\"Invalid response\");\n    }\n    }\n    return workflow;\n\n    // This is basically going to determine what sources should be queried to get an ideal response\n    // It will send the query to each of the dataSources and get a response.\n    \n    async function getRecommendedDataSources(query) {\n    const response = await openai.createCompletion({\n        model: \"text-davinci-003\",\n        prompt: `\n        You are an artifical financial advisor. Your job is to view the user's request and determine which data sources are most relevant to the request.\n        Potential Options:\n        1. AlphaVantage - Stock Data, Alpha Intelligence, Fundamentals, Forex, Commodities, Economic Indicators, Technical Indicators\n        2. WallStreetBets - Stocks & Sentiment by Reddit posts on popular finance subreddits \n        3. StockSentimentAPI - Sentiment Analyis & News Articles by ticker\n        4. GFinance - General market screening, get info by category (winners, losers, active, etc.)\n        5. Crowdsense - Cryptocurrency Sentiment Analsyis by scraping social media & predicting future spikes\n        6. SECFilings - SEC filings for a company by ticker, including Manager Ownership, Insider Transactions, and Manager Holdings   \n        Return: the numbers of the data sources you want to query, separated by commas. For example, if you want to query data sources 1, 2, and 3, you would return \"1,2,3\"\n        Message: ${query}     \n        `,\n        max_tokens: 128,\n        temperature: .5,\n        stop: \"/n\",\n    });\n    return response.data.choices[0].text;\n    }\n\n    \n    async function parseResponses(responses) {\n\n    }\n\n    async function combineResponses(parsedResponses) {\n\n    }\n\n\n\n\n// Send the query to each of the dataSources\n// Get the response from each of the dataSources\n// Parse the response from each of the dataSources\n// Combine the response from each of the dataSources\n// Return the summarized response.\n}"],"mappings":"AAAA,SAASA,aAAa,EAAEC,SAAS,QAAQ,QAAQ;AACjD,SAASC,YAAY,QAAQ,qBAAqB;AAClD,SAASC,cAAc,QAAQ,uBAAuB;AACtD,SAASC,iBAAiB,QAAQ,0BAA0B;AAC5D,SAASC,QAAQ,QAAQ,iBAAiB;AAC1C,SAASC,UAAU,QAAQ,mBAAmB;AAC9C,SAASC,UAAU,QAAQ,mBAAmB;AAG9C,MAAMC,KAAK,GAAGC,OAAO,CAACC,GAAG,CAACC,MAAM;AAChC,MAAMC,MAAM,GAAG,qDAAqD;AAEpE,MAAMC,aAAa,GAAG,IAAIb,aAAa,CAAC;EACpCQ,KAAK,EAAEA,KAAK;EACZI,MAAM,EAAEA;AACV,CAAC,CAAC;AACF,MAAME,MAAM,GAAG,IAAIb,SAAS,CAACY,aAAa,CAAC;AAE7C,OAAO,SAASE,oBAAoB,CAACC,KAAK,EAAE;EAExC,MAAMC,gBAAgB,GAAG;IACrB,CAAC,EAAEf,YAAY;IACf,CAAC,EAAEC,cAAc;IACjB,CAAC,EAAEC,iBAAiB;IACpB,CAAC,EAAEC,QAAQ;IACX,CAAC,EAAEC,UAAU;IACb,CAAC,EAAEC;EACP,CAAC;EAED,SAASW,QAAQ,CAACF,KAAK,EAAC;IACxB,IAAIG,WAAW;IACf,IAAIC,SAAS;IACb,IAAIC,eAAe;IACnB,IAAIC,iBAAiB;IAErBC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;IAC/BD,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;IAC9CL,WAAW,GAAGM,yBAAyB,CAACT,KAAK,CAAC;IAC9CO,OAAO,CAACC,GAAG,CAAE,4BAA2BL,WAAY,EAAC,CAAC;IACtD,MAAMO,UAAU,GAAGC,QAAQ,CAACR,WAAW,CAAC;IACxC;IACA,IAAIO,UAAU,IAAI,CAAC,IAAIA,UAAU,IAAI,CAAC,EAAE;MACxCH,OAAO,CAACC,GAAG,CAAE,6BAA4BE,UAAW,EAAC,CAAC;MACtDN,SAAS,GAAGH,gBAAgB,CAACS,UAAU,CAAC,CAACV,KAAK,CAAC;MAC/CO,OAAO,CAACC,GAAG,CAAE,cAAaJ,SAAU,EAAC,CAAC;MACtCC,eAAe,GAAGO,cAAc,CAACR,SAAS,CAAC;MAC3CE,iBAAiB,GAAGO,gBAAgB,CAACR,eAAe,CAAC;MACrD,OAAOC,iBAAiB;IACxB,CAAC,MAAM;MACHC,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAC;IACnC;EACA;EACA,OAAON,QAAQ;;EAEf;EACA;;EAEA,eAAeO,yBAAyB,CAACT,KAAK,EAAE;IAChD,MAAMc,QAAQ,GAAG,MAAMhB,MAAM,CAACiB,gBAAgB,CAAC;MAC3CC,KAAK,EAAE,kBAAkB;MACzBC,MAAM,EAAG;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmBjB,KAAM;AACzB,SAAS;MACDkB,UAAU,EAAE,GAAG;MACfC,WAAW,EAAE,EAAE;MACfC,IAAI,EAAE;IACV,CAAC,CAAC;IACF,OAAON,QAAQ,CAACO,IAAI,CAACC,OAAO,CAAC,CAAC,CAAC,CAACC,IAAI;EACpC;EAGA,eAAeX,cAAc,CAACR,SAAS,EAAE,CAEzC;EAEA,eAAeS,gBAAgB,CAACR,eAAe,EAAE,CAEjD;;EAKJ;EACA;EACA;EACA;EACA;AACA;AAAC,KA9EeN,oBAAoB;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}